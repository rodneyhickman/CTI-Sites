<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/T
R/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <title>CTI: Resources: Webinars, Please Sign-In</title>
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Language" content="en" />
    <meta name="language" content="en" />
    <meta name="keywords" content="coach training, leadership training, organizational coach training, co-active, become a coach, training coaching, coach certification, coaching certification, coach training, coaching as a career, transformational learning, in person training, face to face training, mentoring, business coaching, business transformation, personal transformation, worldwide coaching, change career, improve career, help people, people to people, active listening, Henry Kimsey-House, Karen Kimsey-House, CPCC, Co-Active Coaching, co-Active model, co-Active Leadership" />
    <meta name="description" content="CTI, The Coaches Training Institute trains more coaches around the world than any other training group. Using our Co-Active model, we helped establish the coach training industry and were a founder of the ICF. Through our coach training, you can become an ICF certified coach. Through our Leadership training, you can raise your leadership skills to new and unexpected heights. Our Organizational training helps companies train their managers to get the most out of happy employees." />
    <meta name="author" content="The Coaches Training Institute (CTI)" />
    <meta name="copyright" content="Copyright &#169; 2009 The Coaches Training Institute. All rights reserved." />
    <meta name="googlebot" content="noarchive,nosnippet" />
    <link rel="icon" href="/favicon.ico" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="/res/css/coaches-training-institute.css" />
    <link rel="stylesheet" type="text/css" href="/res/css/section_resources.css" />
    <link rel="stylesheet" type="text/css" href="/res/css/content_internal_7.css" />
<link rel="stylesheet" type="text/css" href="/res/css/mentor.css" />

    <script type="text/javascript" src="/res/js/coaches-training-institute.js"> </script>
    
    <link rel="stylesheet" type="text/css" href="/res/css/home-footer.css" />
	<script type="text/javascript" src="/res/js/coaches-training-institute.js"> </script>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
	<script type="text/javascript" src="/res/js/specials.js"> </script>
	<script type="text/javascript" src="/res/js/jquery-1.4.2.min.js"></script>
	<script type="text/javascript" src="/res/js/jquery.expire.js"> </script>
	<script language="JavaScript" type="text/javascript">
	var html = '';
	var count = 0;
	google.setOnLoadCallback(function(){
	jQuery.contentExpirator('expire');
	$.get('/blog/feed/', function(xml){
	        $("item", xml).each(function(){
	                count++;
	                if(count > 3) return false;
	                $(this).find("link").each(function(){
	                        html += "<div class='blog-entry'><strong><a href='" + getNodeText(this) +"'> ";
	                }).end().find("title").each(function(){
	                        html += getNodeText(this) + "</a></strong>";
	                }).end().find("description").each(function(){
	                        html += "<p style='font-size: 12px;'>" + getNodeText(this).substring(0, 150) +" [â€¦]<br />";
	                }).end().find("link").each(function(){
	                        html += "<a href='" +getNodeText(this) + "'>Continue reading &raquo;</a></p></div>";
	                });
	        });
	        $("#home-news").html(html);
	});
	});
	
	function getNodeText(node)
	{
	        var text = "";
	        if(node.text) text = node.text;
	        if(node.firstChild) text = node.firstChild.nodeValue;
	        return text;
	}
	</script>

  </head>
  <body>
    <div id="page">
      <div id="tools">
        <!-- generalID --><& '/res/inc/id_general.html' &><!-- -->
        <!-- eCommerceID --><& '/res/inc/id_ecommerce.html' &><!-- -->
      </div>
      <div id="primary">
        <!-- contactNavID --><& '/res/inc/id_contact-nav.html' &><!-- -->
        <ul id="main-nav">
          <li><a href="/why-coaches-training-institute/">Why <abbr title="Coaches Training Institute">CTI</abbr>?</a></li>
          <li><a href="/coach-training/">Coach Training</a></li>
          <li><a href="/leadership/">Leadership</a></li>
          <li><a href="/organizations/">For Organizations</a></li>
          <li><a href="/leaders/">Our Faculty</a></li>
          <li class="current"><a href="/resources/">Resources</a></li>
        </ul>
        
        <div id="broadcast">
          <img src="/res/img/page-banners/content_resources.gif" width="920" height="124" alt="Resources" usemap="#logobutton" />
          <map id="logobutton" name="logobutton">
            <area shape="rect" coords="822,0,899,103" href="/" title="CTI Home" alt="CTI Home" />
          </map>
        </div>
        <div id="sub-nav">

					<ul id="section-nav">

						<li><a href="/resources/multimedia/">Multimedia</a></li>
						<li><a href="/resources/ctichat/">#CTIChat</a></li>

						<li><a href="/coach-training/business-builder/">CTI Business Builder</a></li>

						<li><a href="/resources/tools/">Tools</a></li>

						<li><a href="/resources/books/">Books</a></li>

						<li><a href="/resources/news-and-events/">News &#38; Events</a></li>

						<!-- <li><a href="/blog/">Blog</a></li> -->

						
					</ul>

				</div>
        <div id="content">
          <div id="main">
            
            <div id="breadcrumbs">
            <p><span id="youarehere" class="accessibility-hide">You are here:&#160;</span> <a href="/">Home</a><span class="divider">&#160;||&#160;</span><a href="/resources/">Resources</a><span class="divider">&#160;||&#160;</span><a href="/resources/multimedia/" class="here">Multimedia</a></p>
            </div>
            <div class="pri" style="width:850px;">


<h1 id="main-headline">Please Sign-in</h1>

<p>Please tell us your name and email address.</p>
              
% if($session_ok){
 <p>You are logged is as <% $username %></p>
% } else {

% if($msg){
 <p style="background-color:#ddd;color:#d00;padding:3px;"><% $msg %></p>
% }
 <form action="signin.html" method="POST">
    <input type="hidden" name="redirect" value="<% $redirect %>" />
     <table>
    <tr>
  <th><label for="signin_username">Name</label></th>
  <td><input type="text" name="name" id="signin_name" /></td>
</tr>
    <tr>
  <th><label for="signin_username">Email address</label></th>
  <td><input type="text" name="email" id="signin_username" /></td>
</tr>
  <tr><td></td><td>
  <input type="submit" value="Sign In" />
  </td></tr>
  </table>

</form>
% }
 
   
            </div></div>
        </div>
     <!-- ctaAreaId --><!-- & '/res/inc/id_cta-area.html' & --><!-- -->
        
        <!-- used for cross-browser stabilizion of layout -->
        <div class="pageclear"></div>
      <!-- /div -->
  	 </div>


	<!-- ctaAreaId --><& '/res/inc/id_tabbed-footer-1.html' &><!-- -->
<script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script>
<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/cti_coaches.json?callback=twitterCallback2&amp;count=4"></script>
<script type="text/javascript">
	// Enable footer tab functionality
	(function($) {
		$('#footerMain .tabs a').click(function(event) {
			// Prevent default click behavior
			// ev.preventDefault();
			event.preventDefault();

			// Set up some variables and grab some resuable DOM references
			var $t = $(this), // Quick ref for the clicked link
				$fm = $('#footerMain').eq(0), // Quick ref for the containing footer div
				id = $t.attr('href').split('#')[1], // Get the id out of this link's href
				visName = $('.panel:visible', $fm).get(0).id.substr(6), // Get the name of the currently showing panel (Tuck, Centers, Corporate)
				tgtName = id.substr(6); // Get the name of the target panel to show, like above
		
			$('.tabs', $fm).removeClass('active'+visName).addClass('active'+tgtName); // Change indicator class for proper tab styling
			$('.panel', $fm).hide().siblings('#'+id).show(); // Swap which panel is visible
		});

	})(jQuery);
</script>

  <script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
  try {
  var pageTracker = _gat._getTracker("UA-5715102-1");
  pageTracker._trackPageview();
  } catch(err) {}</script>
  </body>
</html>
<%once>
 use CTI::Secret;
 use Digest::SHA1;
 use URI::Escape;
 use Mail::Sendmail qw(sendmail);
</%once>
<%init>
my $args       = $m->request_args();

my ($email)    = @{$args}{'email'};
my ($name)    = @{$args}{'name'};
$email =~ s/[^A-Za-z0-9\@\_\-\.]//gms; #untaint email address
my ($redirect) = @{$args}{'redirect'} || '/resources/multimedia/';
$redirect =~ s/<.*//; # remove any XSS stuff
$redirect =~ s/\&.*//; # remove any XSS stuff

my ($logout)   = @{$args}{'logout'}   || 0;

my $err    = '';
my $url    = '';
my $result = '';
my $msg    = '';

my %c = Apache2::Cookie->fetch;
my ($username,$MAC);
my %values;
if(exists $c{webinar_pass}){
  %values   = $c{webinar_pass}->value;
  $username = lc $values{username}; # lower case so that it matches database
  $MAC      = $values{MAC};
}
my $session_ok = $MAC eq Digest::SHA1::sha1_hex( $username, Secret::value() );
if ($email) {

  my $em = uri_escape( $email,    '^A-Za-z0-9@.-_' );

  my $MAIL = qq{
The following person has signed-in to listen to an online webinar:

Name: $name
Email: $email

Reference page: http://www.thecoaches.com/resources/webinar/signin.html
  };

  my %mail = (   To      => 'registration@thecoaches.com',
            From    => $username,
            Subject =>  "Subject: CTI Webinar Sign-in",
            Message => $MAIL,
           );

sendmail(%mail);



    # make login cookie
    Apache2::Cookie->new
      ( $r,
        -name  => 'webinar_pass',
        -value => { username => lc $email,
                    MAC =>
                      Digest::SHA1::sha1_hex
                          ( lc $email, Secret::value() ) },
        -path  => '/',
        -domain => '.thecoaches.com',
        -expires => '+120d',
      )->bake($r);
    $username = $email;
    $session_ok = 1;

}
if ($logout){
    # make login cookie
    Apache2::Cookie->new
      ( $r,
        -name  => 'webinar_pass',
        -value => { username => 'none',
                    MAC =>
                      Digest::SHA1::sha1_hex
                          ( 'none', Secret::value() ) },
        -path  => '/',
        -domain => '.thecoaches.com',
        -expires => '-1d',
      )->bake($r);
    $session_ok = 0;  
    $m->redirect('signin.html');
}
if ($session_ok) {
  $m->redirect($redirect);
}
</%init>
<%flags>
 inherit => '../autohandler'
</%flags>
