<?php

require 'lib/model/om/BaseTribe.php';


/**
 * Skeleton subclass for representing a row from the 'tribe' table.
 *
 * 
 *
 * This class was autogenerated by Propel 1.4.2 on:
 *
 * Wed Apr 13 02:34:41 2011
 *
 * You should add additional methods to this class to meet the
 * application requirements.  This class will only be generated as
 * long as it does not already exist in the output directory.
 *
 * @package    lib.model
 */
class Tribe extends BaseTribe {

  public function getNameDate(){
    return $this->getName(). ' - ' .$this->getRetreat1Date('m/d/Y');
  }

  public function getNameDateLocation(){
    return $this->getName(). ' - ' .$this->getRetreat1Date('m/d/Y'). ' - ' .$this->getLocation();
  }

  public function getDateLocation(){
    $location = $this->getLocation();
    if(preg_match('/^ES/',$location)){
      $location2 = 'Sitges, Spain';
    }
    else if(preg_match('/^NC/',$location)){
      $location2 = 'East Coast, US';
    }
    else if(preg_match('/^CN/',$location)){
      $location2 = 'Hagoromo Gotemba Kenshu Center, Gotemba, Shizuoka JAPAN';
    }
    else if(preg_match('/^turk/i',$location)){
      $location2 = 'Turkey';
    }
    else {
      $location2 = 'Northern CA, US';
    }
    return $this->getRetreat1Date('M d, Y'). ' - ' .$location2;
  }

  public function isStarted(){

    $start_date = $this->getRetreat1Date();
    $todays_date = date("Y-m-d");

    $today = strtotime($todays_date);
    $start = strtotime($start_date);

    if ($today > $start) {
      return true;
    } else {
      return false;
    }

  }

} // Tribe
